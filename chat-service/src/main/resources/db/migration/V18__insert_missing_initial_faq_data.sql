-- 초기 FAQ 데이터 정리 및 추가
-- 각 도메인별로 2개씩 총 20개가 되도록 조정
-- 기존 데이터 중 각 도메인별로 3개씩 있는 경우 1개를 비활성화하고, 누락된 도메인에 대해 2개씩 추가

-- 1. 기존 데이터 정리: 각 도메인별로 priority가 3인 것(가장 낮은 우선순위)을 비활성화
UPDATE chat.faq 
SET is_active = false, updated_at = now()
WHERE domain IN ('POLICY', 'SECURITY', 'EDUCATION')
  AND priority = 3
  AND CAST(id AS TEXT) LIKE '00000000-0000-0000-0000-%';

-- 2. 누락된 도메인에 대해 2개씩 추가
INSERT INTO chat.faq (id, question, answer, domain, is_active, priority, published_at, created_at, updated_at, needs_recategorization)
VALUES 
  -- ACCOUNT (계정) 도메인
  ('00000000-0000-0000-0000-000000000021', 
   '계정 생성은 어떻게 하나요?', 
   '인사팀에서 입사 처리 시 자동으로 계정이 생성됩니다. 계정 생성 후 이메일로 로그인 정보가 발송됩니다. 계정 생성 관련 문의는 IT팀으로 연락해주세요.', 
   'ACCOUNT', true, 1, now(), now(), now(), false),
  
  ('00000000-0000-0000-0000-000000000022', 
   '계정 정보를 변경하고 싶어요', 
   '계정 정보 변경은 인사 시스템에서 가능합니다. "내 정보" > "계정 설정" 메뉴에서 이메일, 전화번호 등을 수정할 수 있습니다. 이름이나 사번 변경은 인사팀에 문의해주세요.', 
   'ACCOUNT', true, 2, now(), now(), now(), false),
  
  -- APPROVAL (결재) 도메인
  ('00000000-0000-0000-0000-000000000023', 
   '결재는 어떻게 진행하나요?', 
   '결재 시스템에서 문서를 작성한 후 결재선을 지정하여 제출하시면 됩니다. 결재선은 작성자 → 부서장 → 임원 순으로 진행되며, 각 단계에서 승인 또는 반려할 수 있습니다.', 
   'APPROVAL', true, 1, now(), now(), now(), false),
  
  ('00000000-0000-0000-0000-000000000024', 
   '결재 대기 문서는 어디서 확인하나요?', 
   '결재 시스템의 "결재 대기" 메뉴에서 승인 대기 중인 문서를 확인할 수 있습니다. 알림 설정을 활성화하시면 결재 요청 시 이메일로 알림을 받으실 수 있습니다.', 
   'APPROVAL', true, 2, now(), now(), now(), false),
  
  -- HR (인사) 도메인
  ('00000000-0000-0000-0000-000000000025', 
   '휴가 신청은 어떻게 하나요?', 
   '인사 시스템에서 "휴가 신청" 메뉴를 통해 신청하실 수 있습니다. 휴가 신청은 최소 3일 전에 제출해주시기 바랍니다. 연차, 반차, 경조사 휴가 등 종류별로 신청 가능합니다.', 
   'HR', true, 1, now(), now(), now(), false),
  
  ('00000000-0000-0000-0000-000000000026', 
   '연차는 언제 지급되나요?', 
   '연차는 매년 1월 1일에 지급되며, 입사일 기준으로 계산됩니다. 입사 후 1년 미만인 경우 입사일 기준으로 비례하여 지급됩니다. 연차 사용 현황은 인사 시스템에서 확인할 수 있습니다.', 
   'HR', true, 2, now(), now(), now(), false),
  
  -- PAY (급여) 도메인
  ('00000000-0000-0000-0000-000000000027', 
   '급여 명세서는 어디서 확인하나요?', 
   '인사 시스템의 "급여" > "급여 명세서" 메뉴에서 확인할 수 있습니다. 매월 말일 기준으로 다음 달 5일경 명세서가 발급됩니다. PDF 다운로드 및 이메일 발송도 가능합니다.', 
   'PAY', true, 1, now(), now(), now(), false),
  
  ('00000000-0000-0000-0000-000000000028', 
   '급여 계좌를 변경하고 싶어요', 
   '급여 계좌 변경은 인사 시스템에서 신청할 수 있습니다. "급여" > "계좌 정보 변경" 메뉴에서 신청하시면 됩니다. 변경 신청은 매월 20일까지 접수해야 다음 달 급여부터 적용됩니다.', 
   'PAY', true, 2, now(), now(), now(), false),
  
  -- WELFARE (복지) 도메인
  ('00000000-0000-0000-0000-000000000029', 
   '사내 복지 혜택은 무엇이 있나요?', 
   '사내 복지 혜택으로는 건강검진 지원, 문화비 지원, 자격증 취득 지원, 스포츠 센터 이용, 사내 카페 할인, 통근버스 운영 등이 있습니다. 자세한 내용은 복지 포털에서 확인하실 수 있습니다.', 
   'WELFARE', true, 1, now(), now(), now(), false),
  
  ('00000000-0000-0000-0000-000000000030', 
   '건강검진은 언제 받을 수 있나요?', 
   '건강검진은 매년 1회 지원되며, 입사 후 6개월 이상 경과한 직원부터 신청 가능합니다. 건강검진 신청은 복지 포털에서 가능하며, 지정 병원에서 검진을 받으실 수 있습니다.', 
   'WELFARE', true, 2, now(), now(), now(), false),
  
  -- IT (IT) 도메인
  ('00000000-0000-0000-0000-000000000031', 
   '비밀번호를 잊어버렸어요', 
   '비밀번호 재설정 페이지에서 이메일을 입력하시면 재설정 링크를 보내드립니다. 재설정 링크는 24시간 동안 유효합니다. 재설정이 안 되시면 IT팀으로 문의해주세요.', 
   'IT', true, 1, now(), now(), now(), false),
  
  ('00000000-0000-0000-0000-000000000032', 
   '사내 시스템 접속이 안 돼요', 
   '사내 시스템 접속 문제는 먼저 네트워크 연결을 확인해주세요. VPN 연결이 필요한 경우 VPN을 활성화한 후 다시 시도해주세요. 문제가 지속되면 IT팀으로 문의해주세요.', 
   'IT', true, 2, now(), now(), now(), false),
  
  -- FACILITY (시설) 도메인
  ('00000000-0000-0000-0000-000000000033', 
   '회의실 예약은 어떻게 하나요?', 
   '회의실 예약은 예약 시스템에서 가능합니다. 원하는 날짜와 시간을 선택하고 회의실을 예약하시면 됩니다. 예약은 최대 1개월 전까지 가능하며, 사용 후 정리 정돈 부탁드립니다.', 
   'FACILITY', true, 1, now(), now(), now(), false),
  
  ('00000000-0000-0000-0000-000000000034', 
   '주차장 이용은 어떻게 하나요?', 
   '사내 주차장은 직원 전용이며, 주차 등록이 필요합니다. 인사팀에 차량 정보를 등록하시면 주차권이 발급됩니다. 주차장이 만차인 경우 인근 공영주차장을 이용해주세요.', 
   'FACILITY', true, 2, now(), now(), now(), false),
  
  -- ETC (기타) 도메인
  ('00000000-0000-0000-0000-000000000035', 
   '출근 시간은 언제인가요?', 
   '기본 출근 시간은 오전 9시입니다. 유연근무제를 적용받는 경우 오전 7시부터 오전 10시 사이에 출근하실 수 있습니다. 퇴근 시간은 출근 시간 기준 8시간 후입니다.', 
   'ETC', true, 1, now(), now(), now(), false),
  
  ('00000000-0000-0000-0000-000000000036', 
   '사내 규정은 어디서 확인하나요?', 
   '사내 규정은 인트라넷의 "규정 안내" 메뉴에서 확인할 수 있습니다. 인사 규정, 복리후생 규정, 보안 규정 등 카테고리별로 정리되어 있습니다. 최신 규정은 정기적으로 업데이트됩니다.', 
   'ETC', true, 2, now(), now(), now(), false)
ON CONFLICT (id) DO NOTHING;

