server:
  port: 9002
  servlet:
    encoding:
      charset: UTF-8
      enabled: true
      force: true

spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/db
    username: postgres
    password: postgres
  jpa:
    properties:
      hibernate:
        default_schema: education
        format_sql: true
    hibernate:
      ddl-auto: validate
  flyway:
    enabled: true
    schemas: education
    default-schema: education
    locations: classpath:db/migration
    validate-on-migrate: false
    out-of-order: true
    create-schemas: true
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: http://localhost:8090/realms/ctrlf

management:
  endpoints:
    web:
      base-path: /
      exposure:
        include: health
  endpoint:
    health:
      probes:
        enabled: true

# AI 서버 설정
app:
  video:
    ai:
      base-url: http://localhost:8000
      token: "" # 내부 호출 토큰 (필요시 설정)
  quiz:
    ai:
      base-url: http://localhost:8000
      token: "" # 내부 호출 토큰 (필요시 설정)
  infra:
    base-url: http://localhost:9003 # infra-service 베이스 URL

# 개발 환경 설정
dev:
  auto-source-set-callback: false # true로 설정 시 소스셋 생성 후 자동으로 콜백 시뮬레이션 (AI 서버 호출 없이 처리)

# Feign 클라이언트 설정
spring.cloud.openfeign:
  client:
    config:
      video-ai-client:
        connect-timeout: 5000
        read-timeout: 30000
        logger-level: BASIC

# Feign 로깅 (DEBUG 레벨에서 활성화)
logging:
  level:
    com.ctrlf.education.client: DEBUG
